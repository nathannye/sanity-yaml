defineField({
    name: '{{name}}',
    type: 'array',
    of: [
        {{#each of~}}
        {{#if this.type~}} 
        {{#if (eq this.type 'object')~}}
        {
            type: 'object',
            {{#if this.fields~}}
            fields: [
                {{#each this.fields~}}
                {{#if (eq this.type 'reference')~}}{{> sanity-reference-field name=this.name to=this.to validation=this.validation}}{{~/if~}}
                {{#if (eq this.type 'object')~}}{{> sanity-object-field name=this.name fields=this.fields validation=this.validation type=this.type }}{{~/if~}}
                {{#if (eq this.type 'array')~}}{{> sanity-array-field name=this.name of=this.of validation=this.validation }}{{~/if~}}
                {{#unless (or (eq this.type 'reference') (eq this.type 'object') (eq this.type 'array'))~}}{{> sanity-simple-field name=this.name type=this.type validation=this.validation}}{{~/unless~}}
                {{~/each~}}
            ],
            {{~/if~}}
        }{{#unless @last}},{{/unless}}
        {{~else~}}
        { type: '{{this.type}}' }{{#unless @last}},{{/unless}}
        {{~/if~}}
        {{~else~}}
        { type: '{{this.type}}' }{{#unless @last}},{{/unless}}
        {{~/if~}}
        {{~/each}}
    ]{{> sanity-validation validation=validation}}
}),
